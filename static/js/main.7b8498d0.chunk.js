(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(11),s=n.n(c),o=(n(16),n(17),n(5)),r=n.n(o),i=n(6),l=n(3),u=n(7),j=n(1),b=function(e){var t,n=e.onChangeInput;return Object(j.jsxs)("div",{className:"search-books-bar",children:[Object(j.jsx)(u.b,{className:"close-search",to:"/",children:"Close"}),Object(j.jsx)("div",{className:"search-books-input-wrapper",children:Object(j.jsx)("input",{type:"text",onChange:function(e){clearTimeout(t),t=setTimeout((function(){n(e.target.value)}),500)},placeholder:"Search by title, author, or ISBN"})})]})},d=n(8),h="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var O={Accept:"application/json",Authorization:f},p=function(){return fetch("".concat(h,"/books"),{headers:O}).then((function(e){return e.json()})).then((function(e){return e.books}))},v=function(e,t){return fetch("".concat(h,"/books/").concat(e.id),{method:"PUT",headers:Object(d.a)(Object(d.a)({},O),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},x=function(e,t){return fetch("".concat(h,"/search"),{method:"POST",headers:Object(d.a)(Object(d.a)({},O),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},k=function(e){var t=e.book,n=e.onBooksUpdate,c=Object(a.useState)(t.shelf||"none"),s=Object(l.a)(c,2),o=s[0],u=s[1],b=Object(a.useState)(!1),d=Object(l.a)(b,2),h=(d[0],d[1],function(){var e=Object(i.a)(r.a.mark((function e(a){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.target.value,u(c),n(t,c),e.next=5,v(t,c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(j.jsx)("li",{children:Object(j.jsxs)("div",{className:"book",children:[Object(j.jsxs)("div",{className:"book-top",children:[Object(j.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks&&t.imageLinks.smallThumbnail,")")}}),Object(j.jsx)("div",{className:"book-shelf-changer",children:Object(j.jsxs)("select",{value:o,onChange:h,children:[Object(j.jsx)("option",{value:"moveto",disabled:!0,children:"Move to..."}),Object(j.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(j.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(j.jsx)("option",{value:"read",children:"Read"}),Object(j.jsx)("option",{value:"none",children:"None"})]})})]}),Object(j.jsx)("div",{className:"book-title",children:t.title}),Object(j.jsx)("div",{className:"book-authors",children:t.authors&&t.authors.join(", ")})]})})},m=function(e){var t=e.books,n=e.onBooksUpdate,a=e.allBooks;return t.forEach((function(e){return a.forEach((function(t){t.id==e.id&&(e.shelf=t.shelf)}))})),Object(j.jsx)("div",{className:"search-books-results",children:Object(j.jsx)("ol",{className:"books-grid",children:t.map((function(e){return Object(j.jsx)(k,{book:e,onBooksUpdate:n},e.id)}))})})},y=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),o=Object(l.a)(s,2),u=o[0],d=o[1],h=function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",c([]));case 2:return e.next=4,x(t,5);case 4:n=e.sent,c(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=Object(a.useState)([]),O=Object(l.a)(f,2),v=O[0],k=O[1];return Object(a.useEffect)((function(){var e=!1,t=function(){var t=Object(i.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:n=t.sent,k(n),e=!0;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e||t()}),[]),Object(j.jsxs)("div",{className:"search-books",children:[Object(j.jsx)(b,{onChangeInput:h}),Array.isArray(n)&&Object(j.jsx)(m,{books:n,allBooks:v,onBooksUpdate:function(e,t){e.shelf=t,d(!u)}})]})},N=function(e){var t=e.shelf,n=e.books,a=e.onBooksUpdate;return Object(j.jsxs)("div",{className:"bookshelf",children:[Object(j.jsx)("h2",{className:"bookshelf-title",children:t}),Object(j.jsx)("div",{className:"bookshelf-books",children:Object(j.jsx)("ol",{className:"books-grid",children:n.map((function(e){return Object(j.jsx)(k,{book:e,onBooksUpdate:a},e.title)}))})})]})},g=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),o=Object(l.a)(s,2),u=o[0],b=o[1];Object(a.useEffect)((function(){var e=!1,t=function(){var t=Object(i.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:n=t.sent,c(n),e=!0;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e||t()}),[]);var d=function(e,t){e.shelf=t,b(!u)};return Object(j.jsx)("div",{className:"list-books-content",children:Object(j.jsx)("div",{children:[{title:"Currently Reading",val:"currentlyReading"},{title:"Want to Read",val:"wantToRead"},{title:"Read",val:"read"}].map((function(e){var t=n.filter((function(t){return t.shelf==e.val}));return Object(j.jsx)(N,{shelf:e.title,books:t,onBooksUpdate:d},e.title)}))})})};var w=function(){return Object(j.jsx)("div",{className:"app",children:Object(j.jsxs)("div",{className:"list-books",children:[Object(j.jsx)("div",{className:"list-books-title",children:Object(j.jsx)("h1",{children:"MyReads"})}),Object(j.jsx)(g,{}),Object(j.jsx)("div",{className:"open-search",children:Object(j.jsx)(u.b,{to:"/search",children:"Add a book"})})]})})},S=n(2);s.a.render(Object(j.jsx)(u.a,{basename:window.location.pathname||"",children:Object(j.jsxs)(S.c,{children:[Object(j.jsx)(S.a,{path:"/",element:Object(j.jsx)(w,{})}),Object(j.jsx)(S.a,{path:"/Search",element:Object(j.jsx)(y,{})})]})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.7b8498d0.chunk.js.map